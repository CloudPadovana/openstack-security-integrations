{% comment %}
  Copyright (c) 2014 INFN - "Istituto Nazionale di Fisica Nucleare" - Italy
  All Rights Reserved.

  Licensed under the Apache License, Version 2.0 (the "License"); you may
  not use this file except in compliance with the License. You may obtain
  a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
  WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
  License for the specific language governing permissions and limitations
  under the License. 
{% endcomment %}

{% load i18n %}

<div id="register_div_id" class="register{% if hide %} modal hide{% endif %}">
    <div class="modal-header">
        {% if hide %}<a href="#" class="close" data-dismiss="modal">&times;</a>{% endif %}
        <h3>{% trans "User Registration" %}</h3>
    </div>
    
    {% if table %}
    <div class="modal-body">
        {{ table.render }}
    </div>
    
    <hr />
    {% endif %}
    
    <form id="register_form_id" autocomplete="{{ HORIZON_CONFIG.password_autocomplete }}" class="" 
        action="{{ form_action_url }}" method="POST">
        
        {% csrf_token %}
        
        <div class="modal-body clearfix">
            <fieldset>
    
                {% if userid %}
                <label>User ID</label>
                <p>{{userid}}</p>
                {% endif %}
        
                {% include "horizon/common/_form_fields.html" %}
                
                <button type="button"
                        onclick="document.getElementById('aupdiv').style.display='block';"
                        class="btn btn-primary pull-right">
                    {% trans "Read the AUP" %}
                </button>
                
            </fieldset>
        </div>
        
        <div class="modal-footer">
            <button type="submit" class="btn btn-primary pull-right">{% trans "Register" %}</button>
            <button type="button"
                    onclick="location.href='/dashboard'"
                    class="btn btn-primary pull-right">{% trans "Cancel" %}</button>
        </div>
        
        <div id="aupdiv" style="display: none;">
        
            <div class="modal hide in" style="top: 80px; display: block;">
                <div class="modal-header"><h3>{% trans "Access User Policies" %}</h3></div>
                
                <div class="modal-body clearfix">
                    {% blocktrans %}
                    I declare that:
                    {% endblocktrans %}
                    <ul>
                        
                        <li>
                            {% blocktrans %}
                            I agree with the policies published on the web at http://www.pd.infn.it/calcolo
                            and specifically with the Conditions of Use of INFN'S Computing Resources, 
                            with GARR Acceptable Use Policy and with Internet Netiquette; I'm also aware that 
                            I'm subject to Italian laws about computer crimes, and specifically 
                            Italian law n. 547 of Dec. 23, 1993. 
                            {% endblocktrans %}
                        </li>
                        
                        <li>
                            {% blocktrans %}
                            I'll access to computing resources, hardware, software, services, local network 
                            and Internet only for activities related to my role at INFN.
                            {% endblocktrans %}
                        </li>
                        
                        <li>
                            {% blocktrans %}
                            I'll be the only user of my account and that I'll not share or pass it to anyone, 
                            for any reason, not even temporary. 
                            {% endblocktrans %}
                        </li>
                        <li>
                            {% blocktrans %}
                            I commit myself not to install network or users activity monitoring programs 
                            and not to violate other users privacy.
                            {% endblocktrans %}
                        </li>
                        <li>
                            {% blocktrans %}
                            I commit myself not to modify the computer access restrictions and not to install 
                            networking services without permission of the Computing and Networking Service. 
                            {% endblocktrans %}
                        </li>
                        <li>
                            {% blocktrans %}
                            I commit myself to allow access to the Virtual Machines (VMs) created only and 
                            exclusively to people who filled up the proper application form here or 
                            a later version. 
                            {% endblocktrans %}
                        </li>
                        <li>
                            {% blocktrans %}
                            I am aware that I will be held responsible for all the activities performed 
                            on the VMs created by myself. 
                            {% endblocktrans %}
                        </li>
                        <li>
                            {% blocktrans %}
                            I commit myself to report incidents, suspected abuse or security violation to 
                            the Computing and Networking Service and to cooperate to any problem solution. 
                            {% endblocktrans %}
                        </li>
                    </ul>
                </div>
                
                <div class="modal-footer">
                    <button type="button"
                            onclick="acceptAUP()"
                            class="btn btn-primary pull-right">{% trans "Accept" %}</button>
                    <button type="button"
                            onclick="document.getElementById('aupdiv').style.display='none';"
                            class="btn btn-primary pull-right">{% trans "Reject" %}</button>
                </div>

            </div>

            <div class="modal-backdrop in"></div>
            
        </div>
        
    </form>

    <script type="text/javascript">
        function acceptAUP() {
            document.getElementById('id_aupok').value = 'accept';
            document.getElementById('aupdiv').style.display='none';
        }
    </script>
    
</div>



